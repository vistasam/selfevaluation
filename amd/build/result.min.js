/**
 * // Fetch the captured results and present them in a graphical form
 * @module     block_selfevaluation/result
 * @copyright  2023 Rohit <rx18007@edu.rta.lv>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_selfevaluation/result",["jquery","core/ajax"],(function($,Ajax){return{init:function(teacherCourses,config,allUserArray){let noAccess,fileInfo;teacherCourses||($("#context-select").prop("disabled","disabled"),noAccess=!0),config&&$("<option value='all'>All User</option>").insertAfter($("#context-select option:first"));const checkSelect=document.getElementById("self-assessment-select"),quizSelect=document.getElementById("knowledge-based-select"),checkHeading=document.getElementById("self-assessment-heading"),checkHeadingValue=checkHeading.innerHTML,quizHeading=document.getElementById("knowledge-based-heading"),quizHeadingValue=quizHeading.innerHTML;let userElement=$("#user-select");function getLevel(value){return value>=0&&value<=20?"Foundation - Level 1":value>20&&value<=40?"Foundation - Level 2":value>40&&value<=60?"Intermediate - Level 3":value>60&&value<=80?"Intermediate - Level 4":value>80&&value<=100?"Advanced - Level 5":"Invalid value"}function checkFileAvailability(value){return 0===value?"No Files Available":1===value?"1 file Available":value+" files Available"}noAccess&&allUserArray.forEach((user=>{$("#user-select").append('<option value="'.concat(user.userId,'">').concat(user.userFullName,"</option>"))})),$("#context-select").on("change",(function(){userElement.empty(),userElement.html('<option value="">Please select a Student</option>');var selectedContext=$(this).val();if("all"===selectedContext)allUserArray.forEach((function(user){$("#user-select").append('<option value="'.concat(user.userId,'">').concat(user.userFullName,"</option>"))}));else{var selectedCourse=teacherCourses.find((function(course){return course.courseId===selectedContext}));selectedCourse&&selectedCourse.studentIds.forEach((function(student){$("#user-select").append('<option value="'.concat(student.id,'">').concat(student.name,"</option>"))}))}})),$("#user-select").on("change",(function(){let checkFileCount=0,quizFileCount=0;!function(sBasedData,kBasedData){for(let i=0;i<=5;i++){let tableCell=document.getElementById(sBasedData+i);tableCell.innerText="",tableCell=document.getElementById(kBasedData+i),tableCell.innerText=""}}("self-assessment-data-","knowledge-based-data-");let UserId=userElement.val();if(checkSelect.innerHTML='<option value="">Please select a file</option>',quizSelect.innerHTML='<option value="">Please select a file</option>',UserId){let request={methodname:"blocks_selfevaluation_fetch_file",args:{UserId:UserId}};Ajax.call([request])[0].done((function(data){fileInfo=data.fileInfo,fileInfo.forEach((file=>{if(file.title.toLowerCase().includes("check")){checkFileCount++;const option=document.createElement("option");option.text=file.title,option.value=file.fileId,checkSelect.appendChild(option)}if(file.title.toLowerCase().includes("quiz")){quizFileCount++;const option=document.createElement("option");option.text=file.title,option.value=file.fileId,quizSelect.appendChild(option)}checkHeading.innerHTML=checkHeadingValue+" "+checkFileAvailability(checkFileCount),quizHeading.innerHTML=quizHeadingValue+" "+checkFileAvailability(quizFileCount)}))})).fail((function(data){console.log(data)}))}})),checkSelect.addEventListener("change",(()=>{let checkSelectValue=checkSelect.value;for(let i=0;i<fileInfo.length;i++)if(checkSelectValue==fileInfo[i].fileId)for(let j=0;j<fileInfo[i].percentage.length;j++){let tdElement=document.getElementById("self-assessment-data-"+j);tdElement.innerText="";let levels=getLevel(fileInfo[i].percentage[j]),value="Percentage "+fileInfo[i].percentage[j]+"%\n Level: "+levels;tdElement.innerText=value}})),quizSelect.addEventListener("change",(()=>{let quizSelectValue=quizSelect.value;for(let i=0;i<fileInfo.length;i++)if(quizSelectValue==fileInfo[i].fileId)for(let j=0;j<fileInfo[i].percentage.length;j++){let tdElement=document.getElementById("knowledge-based-data-"+j),levels=getLevel(fileInfo[i].percentage[j]);tdElement.innerText="";let value="Percentage "+fileInfo[i].percentage[j]+"%\n Level: "+levels;tdElement.innerText=value}}))}}}));

//# sourceMappingURL=result.min.js.map